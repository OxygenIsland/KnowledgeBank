---
title: "[[基础知识]]"
type: Literature
status: done
Creation Date: 2023-09-27 12:47
tags:
---
Unity 的渲染是通过使用 Graphics API（Graphics Processing Interface）来实现的，常见的 API 有 OpenGL 和 Direct 3D。在 Unity 中，$\color{#FF0000}{渲染管线 (Render Pipeline)}$负责渲染场景，其中包括三个主要阶段：几何体处理 (Geometry Processing)，光照计算 (Shading)和输出(Output)。

在几何体处理阶段，Unity 会根据场景中所有的 3D 模型、粒子、天空盒等等来生成一个场景中的三角形网格（Mesh）。这个阶段还包括了摄像机裁剪和视锥体计算等。

在光照计算阶段，Unity 使用着色器 (Shader)来计算每个三角形网格的颜色和亮度，这里还会包括光源的计算、阴影的生成等。

在输出阶段，Unity 将经过处理后的图像输出到屏幕上。

Unity 支持两种不同的渲染管线：传统渲染管线 (Legacy Render Pipeline)和高清晰渲染管线 (High Definition Render Pipeline, HDRP)。传统渲染管线使用固定函数来渲染，对开发者的灵活性有所限制，而高清晰渲染管线则是基于可编程渲染管线 (Shader Model)的，并且更加逼真，但是需要更强的 GPU 性能。

Unity 渲染可以分为以下几个步骤：
1. 准备阶段（Setup Stage）

在准备阶段，Unity 会根据场景中的物体和摄像机创建相应的渲染资源，并进行必要的初始化操作。这个阶段一般在场景加载完毕后进行。

2. 几何体渲染阶段（Geometry Rendering Stage）

在几何体渲染阶段，Unity 会将场景中的所有几何体（如三角形网格）通过顶点着色器 (Vertex Shader)进行处理，并将结果传递给下一阶段进行处理。这个阶段的输出结果一般是每个像素的颜色和深度值。

3. 光照计算阶段（Lighting Calculation Stage）

在光照计算阶段，Unity 会根据场景中的光源和材质等信息，计算每个像素的光照强度。这个阶段可以根据实际需要进行多次计算，例如进行阴影计算和全局光照计算等。

4. 后处理阶段（Post-processing Stage）

在后处理阶段，Unity 会对渲染结果进行一些额外的处理，例如模糊、颜色调整等，以达到更好的视觉效果。这个阶段一般由相应的后处理器 (Post-Processor)来完成。

5. 渲染到屏幕阶段（Render to Screen Stage）

在渲染到屏幕阶段，Unity 会将最终的渲染结果显示在屏幕上，并等待下一帧的渲染。

需要注意的是，上述渲染流程是一个大致的框架，具体的实现方式可能会有所不同，例如可以使用 GPU 进行并行计算来提高渲染速度，或者使用多个摄像机进行多视图渲染等。

光影烘焙渲染
Unity 的光影烘焙渲染技术是指将场景中的光照信息烘焙到贴图中，再在运行时应用到场景中的物体上，以达到优化性能和提高渲染质量的目的。

在 Unity 中，使用光影烘焙渲染需要遵循以下步骤：

在场景中添加光源。可以使用各种类型的光源，如点光源、聚光灯、方向光等。

调整光源的参数。根据实际需要，可以调整光源的颜色、强度、范围、角度等参数，以达到期望的效果。

添加烘焙器。在场景中添加烘焙器，烘焙器可以烘焙场景中的光照信息到贴图中。

配置烘焙器参数。根据实际需要，可以配置烘焙器的参数，如烘焙器的分辨率、烘焙范围、烘焙质量等。

烘焙光照信息。在场景准备就绪后，可以通过点击 Unity 编辑器中的“烘焙”按钮，将场景中的光照信息烘焙到贴图中。

应用贴图。将烘焙后的贴图应用到需要的物体上，可以使用 Unity 中的 Lightmap 或 Light Probes 来实现。

需要注意的是，光影烘焙渲染技术虽然可以提高渲染质量和性能，但是它也有一些限制和注意事项：

光影烘焙只适用于静态物体，对于动态物体需要使用实时渲染。

光影烘焙需要占用较多的内存和存储空间，对于大型场景需要注意优化。

光影烘焙需要额外的时间和资源进行烘焙，对于频繁修改的场景需要重新烘焙，对开发效率有一定的影响。