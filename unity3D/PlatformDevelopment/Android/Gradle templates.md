Gradle templates configure how to build an Android application using [[Gradle]]. Each Gradle template represents a single Gradle project. Gradle projects can include, and depend on, other Gradle projects.

这个模板文件有很多，这里只介绍mainTemplate.gradle
Unity 在构建 Android APK 时，会生成一个​**​临时的 Gradle 项目​**​。`mainTemplate.gradle` 是 Unity 提供的模板文件，用于覆盖默认生成的 `build.gradle` 配置。通过此文件，可注入自定义的依赖仓库和 SDK 依赖项。
### ⚙️ ​**​底层原理​**​
1. ​**​Unity 的 Android 构建流程​**​  
    Unity 在构建 Android APK 时，会将项目转换为一个 Gradle 项目，并调用 Android Gradle 插件（AGP）执行编译。`mainTemplate.gradle` 被合并到 Unity 自动生成的 `build.gradle` 中，从而影响依赖解析和打包逻辑。
2. ​**​依赖解析机制​**​  
    Gradle 在构建时按以下顺序解析依赖：
    - ​**​本地仓库​**​（如 `flatDir` 指定的 `libs` 目录）→ ​**​远程仓库​**​（如 `google()`）→ ​**​缓存​**​。  
        添加 `flatDir` 可确保 Unity 找到放置在 `Assets/Plugins/Android/libs` 中的 AAR 文件

| File                         | Location                                                         | Contains                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ---------------------------- | ---------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `baseProjectTemplate.gradle` | In the exported project, `root/build.gradle` folder              | Configuration information that affects all modules in the final Gradle project. It specifies which Android Gradle Plugin version to use and locations of java plugins. The locations are a combination of online repositories and java plugins inside of this project.                                                                                                                                                                                                                                                                          |
| `launcherTemplate.gradle`    | In the exported project, `root/launcher/build.gradle` folder     | Instructions on how to build the Android application. This includes bundling, signing, and whether to split the **apk**[](https://docs.unity3d.com/6000.1/Documentation/Manual/android-BuildProcess.html)  <br>[](https://docs.unity3d.com/6000.1/Documentation/Manual/Glossary.html#APK). It depends on the unityLibrary project and outputs either an .apk file or an app bundle.                                                                                                                                                             |
| `mainTemplate.gradle`        | In the exported project, `root/unityLibrary/build.gradle` folder | Instructions on how to build Unity as a Library. This outputs an .aar file. You can override the Unity template with a custom template in the Unity Editor. Refer to the Providing a custom Gradle build template section on this page for more details.                                                                                                                                                                                                                                                                                        |
| `libTemplate.gradle`         | Varies                                                           | If an [Android Library](https://docs.unity3d.com/6000.1/Documentation/Manual/AndroidAARPlugins.html) **plug-in**[](https://docs.unity3d.com/6000.1/Documentation/Manual/plug-ins.html)  <br>[](https://docs.unity3d.com/6000.1/Documentation/Manual/Glossary.html#Plug-in) doesn’t include a `build.gradle` file, Unity uses the `libTemplate.gradle` file as a template to generate one. After Unity generates the `build.gradle` file, or if one already exists in the plug-in’s directory, Unity copies the plug-in into the Gradle project. |
| `settingsTemplate.gradle`    | In the exported project, `root/settings.gradle` file             | Specifies the names of modules that the Gradle build system should include when it builds the project. You can override the Unity template with a custom template in the Unity Editor. Refer to the Providing a custom Gradle build template section on this page for more details.                                                                                                                                                                                                                                                             |
| `gradleTemplate.properties`  | In the exported project, `root/gradle.properties` file           | Configures the Gradle build system and specifies properties such as the size of the [Java virtual machine (JVM) heap](https://www.ibm.com/docs/en/integration-bus/10.0?topic=development-jvm-heap-sizing)                                                                                                                                                                                                                                                                                                                                       |
