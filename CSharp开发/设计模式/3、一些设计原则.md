---
title: "[[3、一些设计原则]]"
type: Literature
status: done
Creation Date: 2023-10-09 12:24
tags:
---
## 单一职责原则
>“一个类而言，应该仅有一个引起它变化的原因[ASD]”

以手机里的俄罗斯方块游戏的开发为例。
首先方块下落动画的原理是画四个小方块，擦掉，然后再在下一行画四个方块。不断地绘出和擦掉就形成了动画，所以应该要有画和擦方块的代码。然后左右键实现左移和右移，下键实现加速，上键实现旋转，这其实都应该是函数，当然左右移动需要考虑碰撞的问题，下移需要考虑堆积和消层的问题。”

如果就用 WinForm 的方式开发，如何开发呢？
先建立一个窗体 Form，然后加一个用于游戏框的控件，比如 Panel 或者 PictureBox，一个按钮 Button 来控制‘开始’，最后再放一个 Timer 控件用于分时动画的编程。写代码当然就是编写 Timer_Tick 事件来绘出和擦除”
![[Screen Shot 2023-10-08 at 20.08.36.png]]
将所有的代码都写在了 Form 1. Cs 这个类里，是不合理的
如果现在要写的是手机版的俄罗斯方块程序，即 Pocket PC 或者 Windows CE 上运行的程序，它们可以安装. NET 框架的精简版，运行 C#语言编写的应用程序 ，但 PC 上的普通 WinForm 界面的程序不能使用。那这个代码的复用性就不是很好，只能Copy 过去，再针对代码做些改进。
但这当中，下落、旋转、碰撞判断、移动、堆积这些游戏逻辑是始终没变的。这些都是和游戏有关的逻辑，和界面如何表示没有什么关系，没必要写在一起

如果一个类承担的职责过多，就等于把这些职责耦合在一起，一个职责的变化可能会削弱或者抑制这个类完成其他职责的能力。这种耦合会导致脆弱的设计，当变化发生时，设计会遭受到意想不到的破坏[ASD] 。事实上，你完全可以找出哪些是界面，哪些是游戏逻辑，然后进行分离。”

软件设计真正要做的许多内容，就是发现职责并把那些职责相互分离[ASD] 。其实要去判断是否应该分离出类来，也不难，那就是如果你能够想到多于一个的动机去改变一个类，那么这个类就具有多于一个的职责[ASD] ，就应该考虑类的职责分离。

## 开放-封闭原则